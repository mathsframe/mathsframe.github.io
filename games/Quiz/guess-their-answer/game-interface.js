(()=>{"use strict";var e,t={705:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}n.d(t,{m:()=>R});var a=function(){return e=function e(t){var n,i,o,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.isAutoPausing=!1!==(null===(n=this.parent.settings)||void 0===n||null===(i=n.ads)||void 0===i?void 0:i.isAutoPausing),this.types=a.types||(null===(o=this.parent.settings)||void 0===o||null===(r=o.ads)||void 0===r?void 0:r.types)||{initial:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0},interstitial:{enabled:!0,cooldown:60,preload:250,retry:2e3,timeout:250,state:0},rewarded:{enabled:!0,preload:500,retry:2e3,timeout:250,state:0,reward:!0},banner:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0}},this.callbacks={onRewardedAdAvailabilityChange:null,onOffsetChange:null},this.states={OFF:0,IDLE:1,PRELOADING:2,READY:3,PLAYING:4,CLOSED:5,0:"OFF",1:"IDLE",2:"PRELOADING",3:"READY",4:"PLAYING",5:"CLOSED"},this.offsets={top:0,right:0,bottom:0,left:0}},t=[{key:"init",value:function(){var e=this;return this.parent.console.log("[ads] init..."),new Promise((function(t){Object.keys(e.types).forEach((function(t){e.types[t].enabled&&(e.setState(t,e.states.IDLE),e.types[t].preload>0&&setInterval((function(){e.types[t].enabled&&e.preload(t)}),e.types[t].preload))})),t()}))}},{key:"setState",value:function(e,t){var n=this;this.parent.console.log("[ads] setState",e,this.states[t]),"rewarded"!==e?this.types[e].state=t:this.hasRewardedAd().then((function(i){n.types[e].state=t,n.hasRewardedAd().then((function(e){i!==e&&"function"==typeof n.callbacks.onRewardedAdAvailabilityChange&&n.callbacks.onRewardedAdAvailabilityChange(null,e)}))}))}},{key:"preload",value:function(e){var t=this;Object.keys(this.types).includes(e)&&this.types[e].state===this.states.IDLE&&(this.types[e].fails=this.types[e].fails||0,this.types[e].attempts=this.types[e].attempts||0,this.types[e].attempts>0&&this.types[e].fails>=this.types[e].attempts||(this.setState(e,this.states.PRELOADING),this.parent._preloadAd(e).then((function(){t.parent.console.log("[ads] [%s] preloading... OK",e),t.setState(e,t.states.READY)}),(function(){t.types[e].fails++,t.parent.console.log("[ads] [%s] preloading... FAILED (attempt: %s)",e,t.types[e].fails),t.setState(e,t.states.CLOSED),setTimeout((function(){t.setState(e,t.states.IDLE)}),t.types[e].retry)}))))}},{key:"hasCooledDown",value:function(e){var t=this.types[e];if(void 0===t)return!0;if(!(t.last&&t.cooldown>=0))return!0;var n=t.cooldown,i=Math.round((Date.now()-t.last)/1e3);return i>=n||(this.parent.console.log("[ads] [%s/cooldown]: %s seconds left",e,n-i),!1)}},{key:"hasRewardedAd",value:function(){return Promise.resolve(this.types.rewarded.state===this.states.READY&&this.hasCooledDown("rewarded"))}},{key:"onRewardedAdAvailabilityChange",value:function(e){this.callbacks.onRewardedAdAvailabilityChange=e}},{key:"setOffsets",value:function(e,t,n,o){"object"===i(e)?(this.offsets.top=void 0!==e.top?e.top:this.offsets.top,this.offsets.right=void 0!==e.right?e.right:this.offsets.right,this.offsets.bottom=void 0!==e.bottom?e.bottom:this.offsets.bottom,this.offsets.left=void 0!==e.left?e.left:this.offsets.left):(this.offsets.top=void 0!==e?e:this.offsets.top,this.offsets.right=void 0!==t?t:this.offsets.right,this.offsets.bottom=void 0!==n?n:this.offsets.bottom,this.offsets.left=void 0!==o?o:this.offsets.left),"function"==typeof this.callbacks.onOffsetChange&&this.callbacks.onOffsetChange(this.offsets)}},{key:"onOffsetChange",value:function(e){this.callbacks.onOffsetChange=e}},{key:"getOffsets",value:function(){return this.offsets}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"interstitial",n=!1;return new Promise((function(i){if(void 0===e.types[t])return i();if(e.types[t].state!==e.states.READY)return e.parent.console.log("[ads] [%s] skipped (state: %s)",t,e.states[e.types[t].state]),"rewarded"===t?i({isRewardGranted:n}):i();if(!e.hasCooledDown(t))return e.parent.console.log("[ads] [%s] skipped (cooldown)",t),"rewarded"===t?i({isRewardGranted:n}):i();e.setState(t,e.states.PLAYING),e.isAutoPausing&&(e.parent.gameStates.mute(!0,!0),e.parent.gameStates.pause(!0,!0)),e.types[t].last=Date.now();var o=function(t){setTimeout((function(){i("rewarded"===t?{isRewardGranted:n}:{}),e.isAutoPausing&&(e.parent.gameStates.pause(!1,!0),e.parent.gameStates.mute(!1,!0))}),e.types[t].timeout),e.setState(t,e.states.CLOSED),setTimeout((function(){e.setState(t,e.states.IDLE)}),250)};switch(t){case"interstitial":return e.parent._showAd(t).then((function(){o(t)})).catch((function(e){o(t)}));case"rewarded":return e.parent._showAd(t).then((function(e){n=e,o(t)})).catch((function(e){o(t)}));default:return}}))}},{key:"testAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"interstitial";return new Promise((function(t,n){var i=!1,o=function(){t({type:e,args:{success:i}})};if("interstitial"===e)return"undefined"!=typeof Swal?Swal.fire({title:"<strong>[INTERSTITIAL AD]</strong>",html:"<i>This dialog represents an interstitial ad.</i><br /><br /><b>Important:</b> In any case, the game should now be muted!",confirmButtonText:"Close",didDestroy:function(){o()}}):(alert("[INTERSTITIAL AD]\nThis dialog represents an interstitial ad.\nIMPORTANT: In any case, the game should now be muted!"),t());if("rewarded"===e){if("undefined"!=typeof Swal)return Swal.fire({title:"<strong>[REWARDED AD]</strong>",html:"<i>This dialog represents a rewarded ad.</i><br /><br /><b>Important:</b> In any case, the game should now be muted!",showDenyButton:!0,confirmButtonText:"Grant reward",denyButtonText:"Deny reward",didDestroy:function(){o()}}).then((function(e){i=e.isConfirmed}));confirm("[REWARDED AD]\nThis dialog represents a rewarded ad.\nIMPORTANT: In any case, the game should now be muted!\n\nShould a reward be granted?")&&(i=!0),o()}o()}))}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var c=function(){function e(t){var n,i,o,r,a,s,u,l,c=this,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.url=f.url||(null===(n=this.parent.settings)||void 0===n||null===(i=n.gameanalytics)||void 0===i?void 0:i.url)||"//download.gameanalytics.com/js/GameAnalytics-4.4.5.min.js",this.build=f.build||(null===(o=this.parent.settings)||void 0===o||null===(r=o.gameanalytics)||void 0===r?void 0:r.build)||"",this.game_key=f.game_key||(null===(a=this.parent.settings)||void 0===a||null===(s=a.gameanalytics)||void 0===s?void 0:s.game_key)||"",this.secret_key=f.secret_key||(null===(u=this.parent.settings)||void 0===u||null===(l=u.gameanalytics)||void 0===l?void 0:l.secret_key)||"",this.parent.settings=this.parent.settings||{},this.parent.settings.gameanalytics=this.parent.settings.gameanalytics||{},["isEnabled","setEnabledInfoLog","setEnabledEventSubmission"].forEach((function(e){c[e]=void 0!==f[e]?f[e]:void 0!==c.parent.settings.gameanalytics[e]&&c.parent.settings.gameanalytics[e]}))}return t=e,n=[{key:"init",value:function(){var t=this;return this.parent.console.log("[analytics] init..."),this.isEnabled?this.build.length&&this.game_key.length&&this.secret_key.length?new Promise((function(n){return t.parent.helpers.loadFiles(t.url).then((function(){void 0!==e&&(e("setEnabledInfoLog",t.setEnabledInfoLog),e("setEnabledEventSubmission",t.setEnabledEventSubmission),e("configureBuild",t.build),e("initialize",t.game_key,t.secret_key),n()),n()})).catch((function(e){t.parent.console.error(e)}))})):(this.parent.console.warn("[analytics] One or more parameter values were invalid: Build: '%s', Game key: '%s' & Secret key: '%s' -> Initialization aborted!",this.build,this.game_key,this.secret_key),Promise.resolve()):(this.parent.console.info("[analytics] isEnabled: false -> Initialization aborted!"),Promise.resolve())}},{key:"track",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.gameanalytics=window.gameanalytics||{},void 0!==window.gameanalytics.GameAnalytics)switch("string"==typeof e?e=e.toLowerCase():(t.eventType=t.eventType||"",e=t.eventType.toLowerCase()),e){case"ga:business":gameanalytics.GameAnalytics.addBusinessEvent(t.cartType,t.itemType,t.itemId,t.amount,t.currency);break;case"ga:resource":gameanalytics.GameAnalytics.addResourceEvent(t.flowType,t.itemType,t.itemId,t.amount,t.resourceCurrency);break;case"ga:progression":gameanalytics.GameAnalytics.addProgressionEvent(t.progressionStatus,t.progression01,t.progression02,t.progression03,t.value);break;case"ga:error":gameanalytics.GameAnalytics.addErrorEvent(t.severity,t.message);break;case"ga:design":gameanalytics.GameAnalytics.addDesignEvent(t.eventId,t.value)}}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var v=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t},t=[{key:"getLocale",value:function(){var e=this;return["locale","lang"].forEach((function(t){if(null===e.parent.settings[t])try{e.parent.settings[t]=new URL(window.location.href).searchParams.get(t)}catch(e){}})),this.parent.settings.lang||this.parent.settings.locale||(navigator.language||navigator.userLanguage).substr(0,2)}},{key:"loadFiles",value:function(e){var t,n=this,i=document.getElementsByTagName("head")[0];return"string"==typeof e&&(e=[e]),new Promise((function(o,r){Array.isArray(e)?(e.push((function(){o()})),e.reduce((function(e,o){return e.then((function(){return new Promise((function(e,r){var a=document.createElement("script");if("function"==typeof o)return o(),e();switch(o.split(".").pop()){case"js":a.src=o,n.parent.console.log("Loading %s...",o),i.appendChild(a),a.onload=function(){e()},a.onerror=function(){e()};break;case"css":(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href=o,i.appendChild(t),e();break;default:a.src=o,i.appendChild(a),a.onload=function(){e()},a.onerror=function(){e()}}}))}))}),Promise.resolve())):o({info:"no files"})}))}},{key:"getArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:[]}},{key:"updateSettings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){return e.readTextFile("famobi.json",(function(i){t=e.mergeObjects(t,i),t=e.mergeObjects(t,e.parent.params);var o=[];try{o=new URLSearchParams(window.location.search||"")}catch(e){}["locale","lang"].forEach((function(e){null!==p(o.get(e))&&(t[e]=o.get(e))})),t.GAME_ID=t.GAME_ID||t.gameId||t.gameID||t.GAMEID||e.retrieveGameId()||null,delete t.gameId,delete t.gameID,delete t.GAMEID,n(t)}))}))}},{key:"mergeObjects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)?e[n]=d(d({},e[n]),t[n]):e[n]=t[n]);return e}},{key:"readTextFile",value:function(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onload=function(){if(4===n.readyState&&"200"==n.status)try{var e=JSON.parse(n.responseText);t(e)}catch(e){t({})}else t({})},n.onerror=function(){t({})},n.send(null)}},{key:"retrieveGameId",value:function(){for(var e=null,t=document.getElementsByTagName("script"),n=null,i=0;i<t.length;i++){var o=t[i].getAttribute("src");if(o&&o.includes("game-interface.js")){n=t[i];break}}if(n){var r=n.getAttribute("src");"string"==typeof r&&(r.startsWith("http")||(r="http:"+r));try{e=new URL(r).searchParams.get("gameId")}catch(e){}}return e}},{key:"showPauseOverlay",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.getElementById("GameInterfacePauseOverlay");if(null===t){(t=document.createElement("div")).setAttribute("id","GameInterfacePauseOverlay"),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0, 0, 0, 0.8)",t.style.pointerEvents="none",t.style.display="none",["pointerdown","MSPointerDown","touchstart","mousedown"].forEach((function(e){t.addEventListener(e,(function(e){e.stopPropagation()}))}));var n=document.querySelector("canvas");n&&n.parentNode.insertBefore(t,n.nextSibling)}t&&(t.style.display=e?"block":"none",t.style.pointerEvents=e?"auto":"none")}},{key:"getLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!Number.isInteger(e))try{e=parseInt("string"==typeof e?e.replace(/\D/g,""):e)}catch(e){}return Number.isInteger(e)?e:t}}],t&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,w(i.key),i)}}function w(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var k=function(){return e=function e(t){var n,i,o,r,a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.type="log",this.isVerboseLoggingEnabled=void 0!==u.isVerboseLoggingEnabled?u.isVerboseLoggingEnabled:void 0!==(null===(n=this.parent.settings)||void 0===n||null===(i=n.console)||void 0===i?void 0:i.isVerboseLoggingEnabled)&&(null===(o=this.parent.settings)||void 0===o||null===(r=o.console)||void 0===r?void 0:r.isVerboseLoggingEnabled),this.prefix=u.prefix||(null===(a=this.parent.settings)||void 0===a||null===(s=a.console)||void 0===s?void 0:s.prefix)||"GameInterface",this.scopes={"[ads]":{name:"ADS",color:"#3b88c3"},"[analytics]":{name:"ANALYTICS",color:"#9b59b6"},"[storage]":{name:"STORAGE",color:"#2ecc71"},"[gameStates]":{name:"GAMESTATES",color:"#f1c40f"}}},t=[{key:"log",value:function(){return this.type="log",this.print.apply(this,arguments)}},{key:"debug",value:function(){return this.type="debug",this.print.apply(this,arguments)}},{key:"warn",value:function(){return this.type="warn",this.print.apply(this,arguments)}},{key:"info",value:function(){return this.type="info",this.print.apply(this,arguments)}},{key:"error",value:function(){return this.type="error",this.print.apply(this,arguments)}},{key:"table",value:function(){return this.type="table",this.print.apply(this,arguments)}},{key:"print",value:function(){var e;if(this.isVerboseLoggingEnabled||!0===window.isVerboseLoggingEnabled){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=n[0].split(" ")[0];o in this.scopes?(n[0]=n[0].replace(o+" ",""),n[0]=n[0].replace(o,""),n[0]="%c".concat(this.prefix,"%c %c").concat(this.scopes[o].name,"%c ")+n[0],n.splice(1,0,"display: inline-block; color: #fff; background: #e74c3c; padding: 1px 4px; border-radius: 3px;"),n.splice(2,0,""),n.splice(3,0,"display: inline-block; color: #fff; background: "+this.scopes[o].color+"; padding: 1px 4px; border-radius: 3px;"),n.splice(4,0,"")):(n[0]="%c".concat(this.prefix,"%c ")+n[0],n.splice(1,0,"display: inline-block; color: #fff; background: #e74c3c; padding: 1px 4px; border-radius: 3px;"),n.splice(2,0,"")),(e=console)[this.type].apply(e,n)}}}],t&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,A(i.key),i)}}function A(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var E=function(){return e=function e(t){var n,i,o,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.key=a.key||(null===(n=this.parent.settings)||void 0===n||null===(i=n.storage)||void 0===i?void 0:i.key)||"savegame",this.prefix=a.prefix||(null===(o=this.parent.settings)||void 0===o||null===(r=o.storage)||void 0===r?void 0:r.prefix)||"",this.savegame={}},(t=[{key:"init",value:function(){var e=this;return this.parent.console.log("[storage] init..."),new Promise((function(t){e.parent._storage.getItem(e.prefix+e.key).then((function(n){try{e.savegame=JSON.parse(n)||{}}catch(t){e.savegame={}}e.parent.console.debug("[storage] savegame",e.savegame),t()}))}))}},{key:"setItem",value:function(e,t){this.savegame[e]=t,this.save()}},{key:"getItem",value:function(e){return void 0!==this.savegame[e]?this.savegame[e]:null}},{key:"removeItem",value:function(e){delete this.savegame[e],this.save()}},{key:"clear",value:function(){this.savegame={},this.save()}},{key:"save",value:function(){var e=JSON.stringify(this.savegame);this.parent._storage.setItem(this.prefix+this.key,e)}}])&&P(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,j(i.key),i)}}function j(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var T=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.muted=!1,this.paused=!1,this._muted=!1,this._paused=!1,this.callbacks={onAudioStateChange:null,onPauseStateChange:null,onMuteStateChange:null}},t=[{key:"mute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.parent.console.log("[gameStates] %s%s...",e?"muting":"unmuting",t?" (triggered by ad)":"");var n=this.muted;t?e=this.muted=e||this._muted:this._muted=this.muted=e,this.muted!==n&&"function"==typeof this.callbacks.onAudioStateChange&&this.callbacks.onAudioStateChange(e),this.muted!==n&&"function"==typeof this.callbacks.onMuteStateChange&&this.callbacks.onMuteStateChange(e)}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.parent.console.log("[gameStates] %s%s...",e?"pausing":"resuming",t?" (triggered by ad)":"");var n=this.paused;t?e=this.paused=e||this._paused:this._paused=this.paused=e,this.paused!==n&&"function"==typeof this.callbacks.onPauseStateChange&&this.callbacks.onPauseStateChange(e)}},{key:"onPauseStateChange",value:function(e){this.callbacks.onPauseStateChange=e}},{key:"onAudioStateChange",value:function(e){this.callbacks.onAudioStateChange=e}},{key:"onMuteStateChange",value:function(e){this.callbacks.onMuteStateChange=e}},{key:"isMuted",value:function(){return this.muted}},{key:"isPaused",value:function(){return this.paused}}],t&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,G(i.key),i)}}function _(e,t,n){return(t=G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}var R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"_storage",{setItem:function(e,t){return Promise.resolve(window.localStorage.setItem(e,t))},getItem:function(e){return Promise.resolve(window.localStorage.getItem(e))}}),this.gameFiles=t,this.params=n,this.settings={isProd:!0,gameID:null,locale:"en",files:[],features:{audio:!0,pause:!0,score:!0,progress:!0,copyright:!0,credits:!0,version:!0,rewarded:!0,tutorial:!0,visibilitychange:!0},ads:{types:{initial:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0},interstitial:{enabled:!0,cooldown:60,preload:250,retry:2e3,timeout:250,state:0},rewarded:{enabled:!0,preload:500,retry:2e3,timeout:250,state:0,reward:!0},banner:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0}}},gameanalytics:{isEnabled:!1,url:"//download.gameanalytics.com/js/GameAnalytics-4.4.5.min.js",build:"",game_key:"",secret_key:"",setEnabledInfoLog:!0,setEnabledEventSubmission:!0},console:{isVerboseLoggingEnabled:!1},storage:{key:"savegame",prefix:""}}}return t=e,n=[{key:"init",value:function(){var t=this;return this.console=new k(this),this.ads=new a(this),this.gameAnalytics=new c(this),this.helpers=new v(this),this.storage=new E(this),this.gameStates=new T(this),this.console.log("init..."),new Promise((function(n){t.helpers.updateSettings(t.settings).then((function(i){t.settings=i,t.settings.isProd||t.files.push("//cdn.jsdelivr.net/npm/sweetalert2@11"),t.helpers.loadFiles(t.settings.files||[]).then((function(){t._initSDK().then((function(){t.ads.init().then((function(){t.storage.init().then((function(){t.gameAnalytics.init().then((function(){t.helpers.loadFiles(t.gameFiles).then((function(){console.log("%cPortalIF: %c".concat(t.constructor.version," %c| MainGameIF: %c").concat(e.version," %c| Game: %c").concat(t.settings.version||"n/a"),"color: #3498db; font-weight: bold;","color: #2ecc71;","color: #95a5a6;","color: #e74c3c; font-weight: bold;","color: #f1c40f;","color: #9b59b6; font-weight: bold;"),n()}))}))}))}))})).catch((function(e){}))}))}))}))}},{key:"hasFeature",value:function(e){return!!this.settings.features[e]}},{key:"sendPreloadProgress",value:function(e){}},{key:"gameReady",value:function(){}},{key:"gameStart",value:function(e){return Promise.resolve()}},{key:"sendProgess",value:function(e){}},{key:"sendScore",value:function(e){}},{key:"gameComplete",value:function(){return Promise.resolve()}},{key:"gameOver",value:function(){return Promise.resolve()}},{key:"gameQuit",value:function(){return Promise.resolve()}},{key:"onGoToHome",value:function(e){}},{key:"onGoToNextLevel",value:function(e){}},{key:"onGoToLevel",value:function(e){}},{key:"onRestartGame",value:function(e){}},{key:"onQuitGame",value:function(e){}},{key:"onAudioStateChange",value:function(e){return this.gameStates.onAudioStateChange(e)}},{key:"onMuteStateChange",value:function(e){return this.gameStates.onMuteStateChange(e)}},{key:"isMuted",value:function(){return this.gameStates.isMuted()}},{key:"onPauseStateChange",value:function(e){return this.gameStates.onPauseStateChange(e)}},{key:"isPaused",value:function(){return this.gameStates.isMuted()}},{key:"showInterstitialAd",value:function(e,t){var n=this;return new Promise((function(i){n._showInterstitialAd(e,t).then((function(){n.ads.show("interstitial").then((function(){i()}))})).catch((function(e){i()}))}))}},{key:"hasRewardedAd",value:function(e){return this.ads.hasRewardedAd(e)}},{key:"showRewardedAd",value:function(e){var t=this;return new Promise((function(n){t._showRewardedAd(e).then((function(){t.ads.show("rewarded").then((function(e){n(e)}))}))}))}},{key:"onRewardedAdAvailabilityChange",value:function(e){return this.ads.onRewardedAdAvailabilityChange(e)}},{key:"onOffsetChange",value:function(e){return this.ads.onOffsetChange(e)}},{key:"getOffsets",value:function(){return this.ads.getOffsets()}},{key:"getCurrentLanguage",value:function(){return this.helpers.getLocale()}},{key:"innerWidth",get:function(){return window.innerWidth}},{key:"innerHeight",get:function(){return window.innerHeight}},{key:"track",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gameAnalytics.track(e,t)}},{key:"log",value:function(){}},{key:"_initSDK",value:function(){return Promise.resolve()}},{key:"_preloadAd",value:function(){return Promise.resolve()}},{key:"_showInterstitialAd",value:function(){return Promise.resolve()}},{key:"_showRewardedAd",value:function(){return Promise.resolve()}},{key:"_showAd",value:function(){return Promise.resolve()}}],n&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();_(R,"version","1.4.9")},186:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function r(e,t,n){return t=s(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}n.d(t,{C:()=>f});var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(e=r(this,t,[n,i]),"_storage",{getItem:function(e){return new Promise((function(t){t(window.localStorage.getItem(e))}))},setItem:function(e,t){return new Promise((function(n){n(window.localStorage.setItem(e,t))}))}}),e.settings.console=e.settings.console||{},e.settings.console.isVerboseLoggingEnabled=!1,e.settings.ads=e.settings.ads||{},e.settings.ads.types=e.settings.ads.types||{},e.settings.ads.types.interstitial=e.settings.ads.types.interstitial||{},e.settings.ads.types.interstitial.cooldown=0,e.settings.ads.isAutoPausing=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),n=t,(i=[{key:"_initSDK",value:function(){var e=this;return new Promise((function(t,n){var i,o,r,a,s,u,l,c;window.GD_OPTIONS={gameId:(null===(i=e.settings.GD_OPTIONS)||void 0===i?void 0:i.gameId)||null,onEvent:function(e){switch(e.name){case"SDK_READY":t();break;case"SDK_GAME_START":window.GameInterface.gameStates.mute(!1,!0),window.GameInterface.gameStates.pause(!1,!0);break;case"SDK_GAME_PAUSE":window.GameInterface.gameStates.mute(!0,!0),window.GameInterface.gameStates.pause(!0,!0);break;case"SDK_GDPR_TRACKING":case"SDK_GDPR_TARGETING":case"SDK_REWARDED_WATCH_COMPLETE":break;default:window.GameInterface.console.warn("Unhandled event '%s'",e.name)}},advertisementSettings:{debug:!(null===(o=e.settings.GD_OPTIONS)||void 0===o||null===(r=o.advertisementSettings)||void 0===r||!r.debug)}},s="script",u="gamedistribution-jssdk",c=(a=document).getElementsByTagName(s)[0],a.getElementById(u)||((l=a.createElement(s)).id=u,l.src="/main.min.js",c.parentNode.insertBefore(l,c))}))}},{key:"_preloadAd",value:function(e){return new Promise((function(t,n){if("rewarded"===e){if(void 0===window.gdsdk||void 0===window.gdsdk.preloadAd)return n();window.gdsdk.preloadAd("rewarded").then((function(e){t()})).catch((function(e){n()}))}else t()}))}},{key:"_showInterstitialAd",value:function(e,t){return"string"==typeof e&&e.startsWith("break:")?Promise.reject():Promise.resolve()}},{key:"_showRewardedAd",value:function(e){return Promise.resolve()}},{key:"_showAd",value:function(e){var t=this;return new Promise((function(n,i){return void 0===window.gdsdk||"undefined"===window.gdsdk.showAd?i():"interstitial"===e?window.gdsdk.showAd().then((function(){n()})).catch((function(e){t.console.info(e),i()})):"rewarded"===e?window.gdsdk.showAd("rewarded").then((function(e){try{n(e.args.success)}catch(e){n(!1)}})).catch((function(e){t.console.error(e),i()})):void n()}))}}])&&o(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(n(705).m);l(f,"version","1.0.3")}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(705),e=i(186).C,window.GameInterface={init:function(t,n){return new Promise((function(i){window.GameInterface=new e(t,n),window.GameInterface.init().then((function(){i()}))}))}}})();